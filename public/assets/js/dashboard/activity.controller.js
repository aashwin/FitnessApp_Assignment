"use strict";!function(){var t=angular.module("app");t.controller("activityController",["activityService","userService","defaultProfilePic","$scope","$routeParams",function(t,e,r,c,o){c.activity={name:"Loading..."},c.default_profile_pic=r,c.currentUser={},c.comments={errors:[],list:[]},c.comment="",c.mapPathData=[],c.$watch(e.currentUser,function(t){c.currentUser=e.currentUser}),t.get(o.id).then(function(t){return t.success&&t.object?void(c.activity=t.object):void(location.href="../..//404/")},function(){location.href="../..//404/"}),t.getTrackPoints(o.id).then(function(t){if(t.success&&t.object&&t.object instanceof Array)for(var e=0;e<t.object.length;e++)c.mapPathData.push([t.object[e].lat,t.object[e].long])}),t.getComments(o.id).then(function(t){t.success&&t.object&&t.object instanceof Array&&(c.comments.list=t.object)}),c.addActivityComment=function(){t.addComment({activityId:c.activity._id,commentText:c.comment}).then(function(t){t.success?(t.object.createdBy=c.currentUser,c.comments.list.push(t.object),c.comments.errors=[],c.comment="",c.errored=!1):(c.comments.errors=t.errors,c.errored=!0)},function(t){c.comments.errors=t.errors,c.errored=!0})}}])}();