"use strict";!function(){var e=angular.module("app");e.controller("activityController",["activityService","userService","defaultProfilePic","$scope","$routeParams",function(e,t,r,o,c){o.activity={name:"Loading..."},o.default_profile_pic=r,o.currentUser={},o.comments={errors:[],list:[]},o.comment="",o.$watch(t.getCurrentUser(),function(e){o.currentUser=t.getCurrentUser()}),e.get(c.id).then(function(e){return e.success&&e.object?void(o.activity=e.object):void(location.href="/404/")},function(){location.href="/404/"}),e.getComments(c.id).then(function(e){e.success&&e.object&&e.object instanceof Array&&(o.comments.list=e.object)}),o.addActivityComment=function(){e.addComment({activityId:o.activity._id,commentText:o.comment}).then(function(e){e.success?(e.object.createdBy=o.currentUser,o.comments.list.push(e.object),o.comments.errors=[],o.comment="",o.errored=!1):(o.comments.errors=e.errors,o.errored=!0)},function(e){o.comments.errors=e.errors,o.errored=!0})}}])}();