"use strict";!function(){var t=angular.module("app");t.controller("activityController",["activityService","userService","defaultProfilePic","$scope","$routeParams",function(t,e,r,o,c){o.activity={name:"Loading..."},o.default_profile_pic=r,o.currentUser={},o.comments={errors:[],list:[]},o.comment="",o.mapPathData=[],o.$watch(e.getCurrentUser(),function(t){o.currentUser=e.getCurrentUser()}),t.get(c.id).then(function(t){return t.success&&t.object?void(o.activity=t.object):void(location.href="/404/")},function(){location.href="/404/"}),t.getTrackPoints(c.id).then(function(t){if(t.success&&t.object&&t.object instanceof Array)for(var e=0;e<t.object.length;e++)o.mapPathData.push([t.object[e].lat,t.object[e].long])}),t.getComments(c.id).then(function(t){t.success&&t.object&&t.object instanceof Array&&(o.comments.list=t.object)}),o.addActivityComment=function(){t.addComment({activityId:o.activity._id,commentText:o.comment}).then(function(t){t.success?(t.object.createdBy=o.currentUser,o.comments.list.push(t.object),o.comments.errors=[],o.comment="",o.errored=!1):(o.comments.errors=t.errors,o.errored=!0)},function(t){o.comments.errors=t.errors,o.errored=!0})}}])}();