"use strict";!function(){var e=angular.module("app");e.controller("editProfileController",["userService","defaultProfilePic","Notification","$location","$scope","$routeParams",function(e,r,o,l,t,n){t.default_profile_pic=r,t.errored=!1,t.entryModel={},t.genders=[{label:"Undisclosed",value:0},{label:"Male",value:1},{label:"Female",value:2}],t.$watch(t.currentUser,function(e,r,o){t.entryModel=t.currentUser,t.entryModel.dob&&(t.entryModel.dobObj=moment(t.entryModel.dob))}),t.deleteAccount=function(){var r=confirm("Are you sure you want to delete the account? Everything will be erased.");r&&e.delete(t.entryModel._id).then(function(){alert("Account Deleted"),location.href="/"},function(){t.entryModel.errors=["Something went wrong "]})},t.editProfile=function(){t.entryModel.errors=[];var r=t.entryModel;r.gender=t.entryModel.genderObj.value,t.entryModel.dobObj&&(r.dob=Math.round(t.entryModel.dobObj.valueOf()/1e3)),delete r.errors,e.edit(r).then(function(e){e.success?o.success({message:"Successfully updated your profile",delay:5e3}):t.entryModel.errors=e.errors})},t.upload=function(r){t.uploaderText="Uploading...",e.uploadProfilePic(r).then(function(e){t.uploaderText=null,e.success?(o.success({message:"Successfully updated your picture",delay:5e3}),t.uploaderText=null):t.uploaderText=e.errors},function(e){t.uploaderText=e.errors},function(e){t.uploaderText=e+"% uploaded."})}}])}();